<mujoco model="cheetah_soft">
  <!-- ★ plugin 宣言を削除 -->
  <compiler angle="radian" coordinate="local" settotalmass="14"/>
  <option integrator="implicitfast" timestep="0.001" gravity="0 0 -9.81"/>
  <size nstack="300000"/>

  <default>
    <!-- 柔らかめの接触 -->
    <geom solref="0.02 1" solimp="0.96 0.99 0.001"
          friction=".9 .4 .1"/>
    <joint armature=".05" damping=".01"/>
  </default>

  <worldbody>
    <geom type="plane" size="40 40 1" rgba=".8 .9 .8 1"/>

    <!-- ─ torso ─ -->
    <body name="torso" pos="0 0 .7">
      <camera name="track" mode="trackcom" pos="0 -3 0.4"/>

      <joint name="rootx" type="slide" axis="1 0 0"/>
      <joint name="rootz" type="slide" axis="0 0 1"/>
      <joint name="rooty" type="hinge" axis="0 1 0"/>

      <!-- flexcomp → プラグイン無し。エッジスプリングで弾性 -->
      <flexcomp name="torso_flex" type="grid" dof="trilinear"
                count="3 1 1" spacing="0.35 0.12 0.12"
                radius="0.06"
                mass="5" rgba="0.7 0.5 0.3 1">
        <!-- 疑似ヤング率：stiffness×断面長 ≒ 5 MPa -->
        <edge stiffness="8e5" damping="2e4"/>
      </flexcomp>

      <!-- 頭部は剛体のまま -->
      <geom type="capsule" pos=".6 0 .1" size="0.046 0.15" axisangle="0 1 0 .87"/>

      <!-- 以降、太もも／脛／足も全て同様に flexcomp + edge -->
      <!--   (サンプルの bthigh のみ抜粋) -->
      <body name="bthigh" pos="-.5 0 0">
        <joint name="bthigh" type="hinge" axis="0 1 0" range="-.52 1.05"/>
        <flexcomp name="bthigh_flex" type="grid" dof="trilinear"
                  count="2 1 1" spacing="0.12 0.10 0.10"
                  radius="0.06"
                  mass="1.5" rgba="0.2 0.3 0.8 1">
          <edge stiffness="6e5" damping="1.5e4"/>
        </flexcomp>
        <!-- …shin / foot も同様に続く … -->
      </body>
    </body>
  </worldbody>

  <actuator>
    <motor joint="bthigh" gear="120"/>
    <!-- (残り 5 個の motor を従来通り定義) -->
  </actuator>
</mujoco>
